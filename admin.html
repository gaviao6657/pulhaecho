<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin — PulhaEcho</title>
<link rel="stylesheet" href="style.css">
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js';
  import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js';
  import { getFirestore, doc, setDoc, collection, addDoc, getDocs, deleteDoc, getDoc } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js';

  const firebaseConfig = {"apiKey": "AIzaSyDaY10T--JVF6Py9LemZjNNHJPNvQ2ipaA", "authDomain": "pulhaecho.firebaseapp.com", "projectId": "pulhaecho", "storageBucket": "pulhaecho.firebasestorage.app", "messagingSenderId": "1034735567733", "appId": "1:1034735567733:web:6f8e8801f0a38548f93050"};
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  window._firebase = { auth, db };
</script>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
<script>
  window._supabase = supabase.createClient("https://khyjbzjycgqhthtcszwn.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtoeWpiemp5Y2dxaHRodGNzenduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMTMzMDMsImV4cCI6MjA3Nzc4OTMwM30.VAGIBs1bx1cLx0D3rnnSoNDLcIFgolmGTriy5WPn_GM");
</script>
</head>
<body>
<div class="admin-wrap">
  <h1>Admin Panel — PulhaEcho</h1>

  <section class="auth-box">
    <h3>Login</h3>
    <input id="email" placeholder="email" type="email">
    <input id="password" placeholder="password" type="password">
    <button id="login-btn">Login</button>
    <button id="logout-btn" style="display:none">Logout</button>
    <button id="create-admin">Create Admin (first time)</button>
    <p id="auth-msg"></p>
  </section>

  <section class="design-box">
    <h3>Design</h3>
    <label>Cover image (file or url)</label>
    <input id="cover-file" type="file"><input id="cover-url" placeholder="cover url">
    <label>Background image (file or url)</label>
    <input id="bg-file" type="file"><input id="bg-url" placeholder="bg url">
    <button id="save-design">Save Design</button>
    <p id="design-msg"></p>
  </section>

  <section class="cats-box">
    <h3>Categories</h3>
    <input id="new-cat" placeholder="category name"><button id="add-cat">Add Category</button>
    <ul id="cat-list"></ul>
  </section>

  <section class="beats-box">
    <h3>Add Beat</h3>
    <label>Category</label><select id="beat-cat"></select>
    <input id="beat-title" placeholder="title"><input id="beat-desc" placeholder="description">
    <input id="beat-price" placeholder="price (€)">
    <label>Thumbnail (file or url)</label><input id="thumb-file" type="file"><input id="thumb-url">
    <label>MP3 (file or url)</label><input id="mp3-file" type="file"><input id="mp3-url">
    <input id="gum-link" placeholder="gumroad link (optional)">
    <button id="add-beat-btn">Add Beat (upload files)</button>
    <ul id="beats-list"></ul>
  </section>

  <section class="packs-box">
    <h3>Packs</h3>
    <input id="pack-name" placeholder="pack name"><div id="pack-select"></div>
    <button id="create-pack-btn">Create Pack</button>
    <ul id="packs-list"></ul>
  </section>

  <section class="stats-box">
    <h3>Statistics</h3>
    <button id="refresh-stats">Refresh stats</button>
    <pre id="stats-output"></pre>
  </section>

  <p><a href="index.html">Open Store</a></p>
</div>

<script type="module" src="admin-app.js"></script>

</body>
</html>
